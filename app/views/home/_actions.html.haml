- plan = local_assigns[:plan] || :plan

-# todos are always allowed
- plan_text = (plan == :plan) ? I18n.t("home.stream.plan_todo") : I18n.t("home.stream.join_todo")
- plan_link = (plan == :plan) ? add_todo_location_path(location.id) : join_todo_path(object.id)
- plan_id   = (plan == :plan) ? 'pick_todo_date' : 'join_todo'

= link_to(plan_text, '#', :id => plan_id, "data-url" => plan_link)

- if (user != current_user)
  - if user.member?
    -# can meet members
    = link_to(I18n.t("home.stream.meet_user", :name => user.possessive_pronoun.titleize), user_path(user))
  - else
    -# invite others
    = link_to(I18n.t("home.stream.invite_user", :name => user.pronoun.titleize), invite_path(:to => "user:#{user.id}"))
