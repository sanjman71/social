- title('Users')
- stylesheet('admin')

#page-header
  .span-23.prepend-1.last
    %h2 Users

#admin-content.clearfix
  .span.24.last
    = display_flash(:all)
  .span-23.prepend-1.last
    - if @members.present? and @non_members.present?
      %h4
        = [pluralize(@members, 'member'), pluralize(@non_members, 'non-members')].join(', ')

  .span-24.last#users
    - @users.each do |user|
      - klasses = []
      - klasses.push(user.state)
      .span-24.last.user{:class => klasses}
        .span-5.prepend-1.name
          %h4.bottom= link_to user.handle, user_path(user), :id => 'link_user_profile'
          %span{:style => 'font-size: 0.9em; color: #777;'}= user.member? ? "Member" : "User"
        .span-3
          = pluralize(user.checkins_count, 'checkin')
        .span-5
          = pluralize(user.points, 'point')
        .span-5
          = user.state.titleize
          = user.active? ? link_to('Disable', disable_user_path(user, :return_to => request.fullpath), :method => :put, :id => 'toggle_state') : link_to('Enable', activate_user_path(user, :return_to => request.fullpath), :method => :put, :id => 'toggle_state')
        .span-5.last
          = pluralize(user.checkin_logs.error.count, 'error')
